<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Michaela Philip">

<title>Empirical Assignment: Regression Discontinuity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="Assignment_files/libs/clipboard/clipboard.min.js"></script>
<script src="Assignment_files/libs/quarto-html/quarto.js"></script>
<script src="Assignment_files/libs/quarto-html/popper.min.js"></script>
<script src="Assignment_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Assignment_files/libs/quarto-html/anchor.min.js"></script>
<link href="Assignment_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Assignment_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Assignment_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Assignment_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Assignment_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Empirical Assignment: Regression Discontinuity</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Michaela Philip </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="all-data-from-keith-m.-marzilli-ericson-2014" class="level2">
<h2 class="anchored" data-anchor-id="all-data-from-keith-m.-marzilli-ericson-2014">All data from Keith M. Marzilli Ericson (2014)</h2>
<section id="recreate-the-table-of-descriptive-statistics-table-1-from-ericson-2014." class="level5">
<h5 class="anchored" data-anchor-id="recreate-the-table-of-descriptive-statistics-table-1-from-ericson-2014.">1. Recreate the table of descriptive statistics (Table 1) from Ericson (2014).</h5>
<div id="1392dd5d" class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">2006</th>
<th data-quarto-table-cell-role="th">2007</th>
<th data-quarto-table-cell-role="th">2008</th>
<th data-quarto-table-cell-role="th">2009</th>
<th data-quarto-table-cell-role="th">2010</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Mean monthly premium</td>
<td>$37</td>
<td>$40</td>
<td>$36</td>
<td>$30</td>
<td>$33</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th"></td>
<td>(13)</td>
<td>(17)</td>
<td>(20)</td>
<td>(5)</td>
<td>(9)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Mean deductible</td>
<td>$92</td>
<td>$114</td>
<td>$146</td>
<td>$253</td>
<td>$118</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th"></td>
<td>(116)</td>
<td>(128)</td>
<td>(125)</td>
<td>(102)</td>
<td>(139)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fraction enhanced benefit</td>
<td>0.43</td>
<td>0.43</td>
<td>0.58</td>
<td>0.03</td>
<td>0.69</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Fraction of US firms</td>
<td>0.0</td>
<td>0.76</td>
<td>0.98</td>
<td>1.0</td>
<td>0.97</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fraction of state firms</td>
<td>0.0</td>
<td>0.53</td>
<td>0.91</td>
<td>0.68</td>
<td>0.86</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Number of unique firms</td>
<td>51</td>
<td>38</td>
<td>16</td>
<td>5</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Number of plans</td>
<td>1,429</td>
<td>658</td>
<td>202</td>
<td>68</td>
<td>107</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="recreate-figure-3-from-ericson-2014." class="level5">
<h5 class="anchored" data-anchor-id="recreate-figure-3-from-ericson-2014.">2. Recreate Figure 3 from Ericson (2014).</h5>
<div id="2a69d4ce" class="cell" data-execution_count="3">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Assignment_files/figure-html/cell-4-output-1.png" width="587" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="calonico-cattaneo-and-titiunik-2015-discuss-the-appropriate-partition-size-for-binned-scatterplots-such-as-that-in-figure-3-of-ericson-2014.-more-formally-denote-by-mathbbp_-n-p_-j-j-1-2-...j_-n-and-mathbbp_n-p_j-j-1-2-...j_n-the-partitions-of-the-support-of-the-running-variable-x_i-on-the-left-and-right-respectively-of-the-cutoff-barx.-p_-j-and-p_n-denote-the-actual-supports-for-each-j-partition-of-size-j_-n-and-j_n-such-that-x_l-barx-cup_j1j_-.n-p_-j-and-barx-x_u-cup_j1j_n-p_j.-individual-bins-are-denoted-by-p_-j-and-p_j.-with-this-notation-in-hand-we-can-write-the-partitions-j_-n-and-j_n-with-equally-spaced-bins-as-p_-j-x_l-j-times-fracbarx-x_lj_-n-and-p_j-barx-j-times-fracx_u---barxj_n-recreate-figure-3-from-ericson-2014-using-j_-n-j_n-10-and-j_-n-j_n-30-discuss-your-results-and-compare-them-to-your-figure-in-part-2." class="level5">
<h5 class="anchored" data-anchor-id="calonico-cattaneo-and-titiunik-2015-discuss-the-appropriate-partition-size-for-binned-scatterplots-such-as-that-in-figure-3-of-ericson-2014.-more-formally-denote-by-mathbbp_-n-p_-j-j-1-2-...j_-n-and-mathbbp_n-p_j-j-1-2-...j_n-the-partitions-of-the-support-of-the-running-variable-x_i-on-the-left-and-right-respectively-of-the-cutoff-barx.-p_-j-and-p_n-denote-the-actual-supports-for-each-j-partition-of-size-j_-n-and-j_n-such-that-x_l-barx-cup_j1j_-.n-p_-j-and-barx-x_u-cup_j1j_n-p_j.-individual-bins-are-denoted-by-p_-j-and-p_j.-with-this-notation-in-hand-we-can-write-the-partitions-j_-n-and-j_n-with-equally-spaced-bins-as-p_-j-x_l-j-times-fracbarx-x_lj_-n-and-p_j-barx-j-times-fracx_u---barxj_n-recreate-figure-3-from-ericson-2014-using-j_-n-j_n-10-and-j_-n-j_n-30-discuss-your-results-and-compare-them-to-your-figure-in-part-2.">3. Calonico, Cattaneo, and Titiunik (2015) discuss the appropriate partition size for binned scatterplots such as that in Figure 3 of Ericson (2014). More formally, denote by <span class="math inline">\(\mathbb{P}_{-,n} = \{P_{-,j} : j = 1, 2, ...J_{-,n}\}\)</span> and <span class="math inline">\(\mathbb{P_{+,n}} = \{P_{+,j} : j = 1, 2, ...J_{+,n}\}\)</span> the partitions of the support of the running variable <span class="math inline">\(x_i\)</span> on the left and right (respectively) of the cutoff, <span class="math inline">\(\bar{x}\)</span>. <span class="math inline">\(P_{-,j}\)</span> and <span class="math inline">\(P_{+,n}\)</span> denote the actual supports for each <span class="math inline">\(j\)</span> partition of size <span class="math inline">\(J_{-,n}\)</span> and <span class="math inline">\(J_{+,n}\)</span> such that <span class="math inline">\([x_l, \bar{x}) = \cup_{j=1}^{J_{-.n}} P_{-,j}\)</span> and <span class="math inline">\((\bar{x}, x_u] = \cup_{j=1}^{J_{+,n}} P_{+,j}\)</span>. Individual bins are denoted by <span class="math inline">\(p_{-,j}\)</span> and <span class="math inline">\(p_{+,j}\)</span>. With this notation in hand, we can write the partitions <span class="math inline">\(J_{-,n}\)</span> and <span class="math inline">\(J_{+,n}\)</span> with equally-spaced bins as <span class="math display">\[ p_{-,j} = x_l + j \times \frac{\bar{x}-x_l}{J_{-,n}}\]</span> and <span class="math display">\[p_{+,j} = \bar{x} + j \times \frac{x_u - \bar{x}}{J_{+,n}}\]</span> Recreate Figure 3 from Ericson (2014) using <span class="math inline">\(J_{-,n} = J_{+,n} = 10\)</span> and <span class="math inline">\(J_{-,n} = J_{+,n} = 30\)</span> Discuss your results and compare them to your figure in Part 2.</h5>
<div id="f6e1668f" class="cell" data-execution_count="4">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Assignment_files/figure-html/cell-5-output-1.png" width="587" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Visually, using 10 bins seems to fit the data pretty well. The fit in the middle is very similar to Ericson’s Figure 3, and although the two extremes aren’t perfect they are not worse than Ericson’s figure and may fit a bit better.</p>
<div id="c8619581" class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Assignment_files/figure-html/cell-6-output-1.png" width="587" height="449" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Using 30 bins for this graph seems to mostly have included a lot of noise - the fit is not significantly better but the graph looks much more busy.</p>
</section>
<section id="with-the-notation-above-calonico-cattaneo-and-titiunik-2015-derive-the-optimal-number-of-partitions-for-an-evenly-spaced-es-rd-plot.-they-show-that-j_es---n-fracv_-mathbbv_es--fracnlogn2-and-j_es-n-fracv_mathbbv_es-fracnlogn2-where-v_--and-v_-denote-the-sample-variance-of-the-subsamples-to-the-left-and-right-of-the-cutoff-and-nu_es-is-an-integrated-variance-term-derived-in-the-paper.-use-the-rdrobust-package-in-r-or-stata-or-python-to-find-the-optimal-number-of-bins-with-an-evenly-spaced-binning-strategy.-report-this-bin-count-and-recreate-your-binned-scatterplots-from-parts-2-and-3-based-on-the-optimal-bin-number." class="level5">
<h5 class="anchored" data-anchor-id="with-the-notation-above-calonico-cattaneo-and-titiunik-2015-derive-the-optimal-number-of-partitions-for-an-evenly-spaced-es-rd-plot.-they-show-that-j_es---n-fracv_-mathbbv_es--fracnlogn2-and-j_es-n-fracv_mathbbv_es-fracnlogn2-where-v_--and-v_-denote-the-sample-variance-of-the-subsamples-to-the-left-and-right-of-the-cutoff-and-nu_es-is-an-integrated-variance-term-derived-in-the-paper.-use-the-rdrobust-package-in-r-or-stata-or-python-to-find-the-optimal-number-of-bins-with-an-evenly-spaced-binning-strategy.-report-this-bin-count-and-recreate-your-binned-scatterplots-from-parts-2-and-3-based-on-the-optimal-bin-number.">4. With the notation above, Calonico, Cattaneo, and Titiunik (2015) derive the optimal number of partitions for an evenly-spaced (ES) RD plot. They show that <span class="math display">\[J_{ES, -, n} = [\frac{V_-}{\mathbb{V}_{ES,-}} \frac{n}{\log(n)^2}]\]</span> and <span class="math display">\[J_{ES, +, n} = [\frac{V_+}{\mathbb{V}_{ES,+}} \frac{n}{\log(n)^2}]\]</span> where <span class="math inline">\(V_-\)</span> and <span class="math inline">\(V_+\)</span> denote the sample variance of the subsamples to the left and right of the cutoff and <span class="math inline">\(\nu_{ES}\)</span> is an integrated variance term derived in the paper. Use the rdrobust package in R (or Stata or Python) to find the optimal number of bins with an evenly-spaced binning strategy. Report this bin count and recreate your binned scatterplots from parts 2 and 3 based on the optimal bin number.</h5>
<div id="d27ad799" class="cell" data-execution_count="6">
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\micha\Lib\site-packages\rdrobust\rdplot.py:743: FutureWarning: Using print(plot) to draw and show the plot figure is deprecated and will be removed in a future version. Use plot.show().</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Assignment_files/figure-html/cell-7-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
</div>
<div id="9f527a95" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Assignment_files/figure-html/cell-8-output-1.png" width="587" height="449" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>The optimal number of bins is 11.</code></pre>
</div>
</div>
</section>
<section id="one-key-underlying-assumption-for-rd-design-is-that-agents-cannot-precisely-manipulate-the-running-variable.-while-precisely-is-not-very-scientific-we-can-at-least-test-for-whether-there-appears-to-be-a-discrete-jump-in-the-running-variable-around-the-threshold.-evidence-of-such-a-jump-may-suggest-that-manipulation-is-present.-provide-the-results-from-the-manipulation-tests-described-in-cattaneo-jansson-and-ma-2018.-this-test-can-be-implemented-with-the-rddensity-package-in-r-stata-or-python." class="level5">
<h5 class="anchored" data-anchor-id="one-key-underlying-assumption-for-rd-design-is-that-agents-cannot-precisely-manipulate-the-running-variable.-while-precisely-is-not-very-scientific-we-can-at-least-test-for-whether-there-appears-to-be-a-discrete-jump-in-the-running-variable-around-the-threshold.-evidence-of-such-a-jump-may-suggest-that-manipulation-is-present.-provide-the-results-from-the-manipulation-tests-described-in-cattaneo-jansson-and-ma-2018.-this-test-can-be-implemented-with-the-rddensity-package-in-r-stata-or-python.">5. One key underlying assumption for RD design is that agents cannot precisely manipulate the running variable. While “precisely” is not very scientific, we can at least test for whether there appears to be a discrete jump in the running variable around the threshold. Evidence of such a jump may suggest that manipulation is present. Provide the results from the manipulation tests described in Cattaneo, Jansson, and Ma (2018). This test can be implemented with the rddensity package in R, Stata, or Python.</h5>
<div id="be4e7676" class="cell" data-execution_count="8">
<div class="cell-output cell-output-stdout">
<pre><code>The p-value for the manipulation test is 2
The difference in estimated density at the cutoff is 0.0026</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Assignment_files/figure-html/cell-9-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="recreate-panels-a-and-b-of-table-3-in-ericson-2014-using-the-same-bandwidth-of-4.00-but-without-any-covariates." class="level5">
<h5 class="anchored" data-anchor-id="recreate-panels-a-and-b-of-table-3-in-ericson-2014-using-the-same-bandwidth-of-4.00-but-without-any-covariates.">6. Recreate Panels A and B of Table 3 in Ericson (2014) using the same bandwidth of $4.00 but without any covariates.</h5>
<div id="ba874a51" class="cell" data-execution_count="9">
<div class="cell-output cell-output-display" data-execution_count="9">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">2006</th>
<th data-quarto-table-cell-role="th">2007</th>
<th data-quarto-table-cell-role="th">2008</th>
<th data-quarto-table-cell-role="th">2009</th>
<th data-quarto-table-cell-role="th">2010</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Panel A. Local linear, bandwidth $4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Below benchmark, 2006</td>
<td>2.224</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th"></td>
<td>(0.255)</td>
<td>(0.0)</td>
<td>(0.0)</td>
<td>(0.0)</td>
<td>(0.0)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Below Benchmark</td>
<td>-0.014</td>
<td>-0.008</td>
<td>-0.014</td>
<td>-0.256</td>
<td>-0.103</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th"></td>
<td>(0.051)</td>
<td>(0.037)</td>
<td>(0.022)</td>
<td>(0.061)</td>
<td>(0.044)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Above Benchmark</td>
<td>-0.142</td>
<td>-0.136</td>
<td>-0.076</td>
<td>-0.055</td>
<td>-0.078</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th"></td>
<td>(0.114)</td>
<td>(0.026)</td>
<td>(0.014)</td>
<td>(0.018)</td>
<td>(0.016)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Observations</td>
<td>306.0</td>
<td>276.0</td>
<td>231.0</td>
<td>173.0</td>
<td>160.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">R^2</td>
<td>0.576</td>
<td>0.112</td>
<td>0.143</td>
<td>0.242</td>
<td>0.332</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Panel B. Polynomial, bandwidth $4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Below benchmark, 2006</td>
<td>2.311</td>
<td>0.0</td>
<td>0.0</td>
<td>-0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th"></td>
<td>(0.544)</td>
<td>(0.0)</td>
<td>(0.0)</td>
<td>(0.0)</td>
<td>(0.0)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Observations</td>
<td>306.0</td>
<td>276.0</td>
<td>231.0</td>
<td>173.0</td>
<td>160.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">R^2</td>
<td>0.583</td>
<td>0.119</td>
<td>0.215</td>
<td>0.342</td>
<td>0.398</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="calonico-cattaneo-and-farrell-2020-show-that-pre-existing-optimal-bandwidth-calculations-such-as-those-used-in-ericson-2014-are-invalid-for-appropriate-inference.-they-propose-an-alternative-method-to-derive-minimal-coverage-error-ce-optimal-bandwidths.-re-estimate-your-rd-results-using-the-ce-optimal-bandwidth-rdrobust-will-do-this-for-you-and-compare-the-bandwidth-and-rd-estimates-to-that-in-table-3-of-ericson-2014." class="level5">
<h5 class="anchored" data-anchor-id="calonico-cattaneo-and-farrell-2020-show-that-pre-existing-optimal-bandwidth-calculations-such-as-those-used-in-ericson-2014-are-invalid-for-appropriate-inference.-they-propose-an-alternative-method-to-derive-minimal-coverage-error-ce-optimal-bandwidths.-re-estimate-your-rd-results-using-the-ce-optimal-bandwidth-rdrobust-will-do-this-for-you-and-compare-the-bandwidth-and-rd-estimates-to-that-in-table-3-of-ericson-2014.">7. Calonico, Cattaneo, and Farrell (2020) show that pre-existing optimal bandwidth calculations (such as those used in Ericson (2014)) are invalid for appropriate inference. They propose an alternative method to derive minimal coverage error (CE)-optimal bandwidths. Re-estimate your RD results using the CE-optimal bandwidth (rdrobust will do this for you) and compare the bandwidth and RD estimates to that in Table 3 of Ericson (2014).</h5>
<div id="5af9cef3" class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="10">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">2006</th>
<th data-quarto-table-cell-role="th">2007</th>
<th data-quarto-table-cell-role="th">2008</th>
<th data-quarto-table-cell-role="th">2009</th>
<th data-quarto-table-cell-role="th">2010</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Panel A. Local linear, CE-optimal Bandwidths</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">LIS Premium, 2006</td>
<td>-2.091</td>
<td>-1.142</td>
<td>-0.608</td>
<td>-0.321</td>
<td>-0.241</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th"></td>
<td>(0.29)</td>
<td>(0.271)</td>
<td>(0.258)</td>
<td>(0.303)</td>
<td>(0.353)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Bandwidth</td>
<td>3.44</td>
<td>3.69</td>
<td>4.4</td>
<td>3.78</td>
<td>4.26</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Panel B. Polynomial, CE-optimal Bandwidths</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">LIS Premium, 2006</td>
<td>-2.409</td>
<td>-1.306</td>
<td>-0.634</td>
<td>-0.276</td>
<td>-0.219</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th"></td>
<td>(0.361)</td>
<td>(0.346)</td>
<td>(0.317)</td>
<td>(0.342)</td>
<td>(0.384)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Bandwidth</td>
<td>4.29</td>
<td>4.74</td>
<td>6.2</td>
<td>6.4</td>
<td>7.83</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p>The bandwidth at the beginning of the time frame is very close to Ericson’s bandwidth of $4. Over time, however, the optimal bandwidth grows significantly, so choosing one bandwidth for the entire analysis may not be optimal. The signs for all of my results are opposite to Ericson’s which was initially alarming, but the interpretation appears to be the same as Ericson’s conclusion - pricing lower in 2006 led to increasing market shares in the following years.</p>
</section>
<section id="now-lets-extend-the-analysis-in-section-v-of-ericson-2014-using-iv.-use-the-presence-of-part-d-low-income-subsidy-as-an-iv-for-market-share-to-examine-the-effect-of-market-share-in-2006-on-future-premium-changes." class="level5">
<h5 class="anchored" data-anchor-id="now-lets-extend-the-analysis-in-section-v-of-ericson-2014-using-iv.-use-the-presence-of-part-d-low-income-subsidy-as-an-iv-for-market-share-to-examine-the-effect-of-market-share-in-2006-on-future-premium-changes.">8. Now let’s extend the analysis in Section V of Ericson (2014) using IV. Use the presence of Part D low-income subsidy as an IV for market share to examine the effect of market share in 2006 on future premium changes.</h5>
<div id="eaa79bba" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display" data-execution_count="11">
<div>
<table class="simpletable table table-sm table-striped small" data-quarto-postprocess="true">
<caption>IV-2SLS Estimation Summary</caption>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dep. Variable:</td>
<td>premium_diff</td>
<td data-quarto-table-cell-role="th">R-squared:</td>
<td>-0.1232</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Estimator:</td>
<td>IV-2SLS</td>
<td data-quarto-table-cell-role="th">Adj. R-squared:</td>
<td>-0.1234</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">No. Observations:</td>
<td>5446</td>
<td data-quarto-table-cell-role="th">F-statistic:</td>
<td>278.56</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Date:</td>
<td>Wed, Apr 24 2024</td>
<td data-quarto-table-cell-role="th">P-value (F-stat)</td>
<td>0.0000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Time:</td>
<td>19:06:43</td>
<td data-quarto-table-cell-role="th">Distribution:</td>
<td>chi2(1)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Cov. Estimator:</td>
<td>robust</td>
<td data-quarto-table-cell-role="th"></td>
<td></td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th"></td>
<td></td>
<td data-quarto-table-cell-role="th"></td>
<td></td>
</tr>
</tbody>
</table>
<table class="simpletable table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Parameter Estimates</caption>
<tbody>
<tr class="odd">
<td></td>
<td data-quarto-table-cell-role="th">Parameter</td>
<td data-quarto-table-cell-role="th">Std. Err.</td>
<td data-quarto-table-cell-role="th">T-stat</td>
<td data-quarto-table-cell-role="th">P-value</td>
<td data-quarto-table-cell-role="th">Lower CI</td>
<td data-quarto-table-cell-role="th">Upper CI</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">lnshare</td>
<td>1.4109</td>
<td>0.0845</td>
<td>16.690</td>
<td>0.0000</td>
<td>1.2453</td>
<td>1.5766</td>
</tr>
</tbody>
</table>
<br><br>Endogenous: lnshare<br>Instruments: lispremium06<br>Robust Covariance (Heteroskedastic)<br>Debiased: False
</div>
</div>
</div>
</section>
<section id="discuss-your-findings-and-compare-results-from-different-binwidths-and-bandwidths.-compare-your-results-in-part-8-to-the-invest-then-harvest-estimates-from-table-4-in-ericson-2014." class="level5">
<h5 class="anchored" data-anchor-id="discuss-your-findings-and-compare-results-from-different-binwidths-and-bandwidths.-compare-your-results-in-part-8-to-the-invest-then-harvest-estimates-from-table-4-in-ericson-2014.">9. Discuss your findings and compare results from different binwidths and bandwidths. Compare your results in part 8 to the invest-then-harvest estimates from Table 4 in Ericson (2014).</h5>
<p>My dependent variable for part 8 was the difference in premium from 2006 to 2007, so we can interpret these results to say that an increased market share, as instrumented by the presence of a low-income subsidy, led to an increase in premiums from 2006 to 2007. This conclusion is consistent with the ‘invest-then-harvest’ theory and results from Table 4.</p>
<p>It doesn’t seem as though different binwidths make a large difference in visual results, but using your program to choose the optimal binwidth could ensure that you provide a clear visual that fits the data while reducing noise.</p>
<p>Choosing different bandwidths do tend to affect the results more and, at least in this case, choosing one bandwidth for several years of data does not seem to be the best option. It seems like for contexts like healthcare, where prices can grow very rapidly, allowing for a bandwidth that changes over time may help you make the clearest comparisons.</p>
</section>
<section id="reflect-on-this-assignment.-what-did-you-find-most-challenging-what-did-you-find-most-surprising" class="level5">
<h5 class="anchored" data-anchor-id="reflect-on-this-assignment.-what-did-you-find-most-challenging-what-did-you-find-most-surprising">10. Reflect on this assignment. What did you find most challenging? What did you find most surprising?</h5>
<p>I found it surprisingly challenging to learn to use the rdplot and rddensity packages. Most packages I have used have very clear and established documentation online, so finding information about different commands or functionality is quite easy. The best way to get information on these packages, however, was directly from the creator’s github. I found it a little difficult to learn to navigate the different documentation and find where the most helpful information was, but it was definitely a helpful experience to have to learn to find what I needed. Even having done it once for the first package made it easier to find what I needed for the second package, so I think it was a beneficial experience. Debugging is also always challenging and frustrating, but it is encouraging to find that I am (slowly but surely) becoming faster and more efficient at it.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>